<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Face detection demo with Haar cascades detector in javascript and HTML5 canvas</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style type="text/css">
            body
            {
             background-color:#121212;
             color:#fff;
             font-size:32px;
            }
        </style>
        <!-- support parallel computations using web-workers (parallel.js) -->
        <script type="text/javascript" src="../build/parallel/parallel.min.js"></script>
        <script type="text/javascript" src="../build/haar-detector.min.js"></script>
        <script type="text/javascript" src="../cascades/haarcascade_frontalface_alt.js"></script>
    </head>
    <body>
        <a href="https://github.com/foo123/HAAR.js">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
        </a>
        
        <div>Face Detection with OpenCV haar cascades in Javascript</div>
        <div id="wait" style="display:none"><img src='ajax-loader.gif' /></div>
        <div id="container" style="position:relative;"><canvas id='image'></canvas></div>
        <div style="font-size:18px"><a href="http://nikos-web-development.netai.net/">Nikos M.</a></div>
        
        <script>
        //<![CDATA[
        var wait=document.getElementById('wait'),
            canvas=document.getElementById('image'),
            detector, image=new Image();
            
        image.onload=function(){
            wait.style.display='block';
            canvas.width=image.width; canvas.height=image.height;
            canvas.getContext('2d').drawImage(image,0,0);
            
            // detect the feature
            new HAAR.Detector(haarcascade_frontalface_alt, Parallel)
                    .image(image) // use the image
                    .interval(30) // set detection interval for asynchronous detection (if not parallel)
                    .complete(function(){  // onComplete callback
                        var i, rect, ctx=canvas.getContext('2d'), l=this.objects.length;
                        wait.style.display='none';
                        ctx.strokeStyle="rgba(75,221,17,1)"; ctx.lineWidth=2;
                        for(i=0; i<l; i++)
                        {
                            rect=this.objects[i];
                            ctx.strokeRect(rect.x, rect.y, rect.width, rect.height);
                        }
                        alert(l+" Objects found");
                    })
                    .detect(1, 1.25, 0.1, 1, true); // go
        };
        image.src='model1.jpg'; // load it
        //]]>
        </script>
    </body>
</html>